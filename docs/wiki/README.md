# AI Game Theory Simulation - Wiki

**Welcome to the comprehensive documentation for the AI Alignment Game Theory Simulation.**

This simulation explores the dynamics between AI systems, human institutions, and societal forces to model emergent pathways toward three primary outcomes: Cyberpunk Dystopia, Human Extinction, or Solarpunk Utopia.

## 🎯 Quick Start

- **New to the simulation?** Start with [Game Overview](./overview.md)
- **Setting up?** See [Getting Started](./getting-started.md)
- **Running experiments?** Check [Monte Carlo Guide](./monte-carlo.md)
- **Understanding outcomes?** Read [Win Conditions](./outcomes.md)

## 📚 Documentation Structure

### Core Systems

The fundamental building blocks of the simulation:

| System | Status | Description |
|--------|--------|-------------|
| [🏢 Organizations](./systems/organizations.md) | ✅ | Companies that own data centers and AI models |
| [💻 Compute Infrastructure](./systems/compute-infrastructure.md) | ✅ | Data centers, allocation, Moore's law |
| [🤖 AI Agents](./systems/ai-agents.md) | ✅ | AI models, capabilities, alignment, lifecycles |
| [🏛️ Government](./systems/government.md) | ✅ | Regulations, control, policies |
| [👥 Society](./systems/society.md) | ✅ | Trust, unemployment, adaptation |
| [🌍 Environmental](./systems/environmental.md) | ✅ | Resources (65%), pollution (30%), climate, biodiversity (35%) |
| [🤝 Social Cohesion](./systems/social-cohesion.md) | ✅ | Meaning crisis (22%), institutional erosion, social bonds |
| [⚠️ Technological Risk](./systems/technological-risk.md) | ✅ | Misalignment, safety debt, concentration, complacency |
| [🔬 Breakthrough Technologies](./systems/breakthrough-technologies.md) | ✅ | **71 technologies** in comprehensive tech tree (TIER 0-4) |
| [🏛️ Governance Quality](./systems/governance-quality.md) | ✅ | Democratic resilience, decision quality, institutional capacity |
| [🌟 Upward Spirals](./systems/upward-spirals.md) | ✅ | 6 virtuous cascades, multiple paths to Utopia |
| [🎨 Meaning Renaissance](./systems/meaning-renaissance.md) | ✅ | Cultural flourishing, 4 dimensions of meaning |
| [🕊️ Conflict Resolution](./systems/conflict-resolution.md) | ✅ | Diplomatic AI, post-scarcity peace, cyber defense, 4 pillars |
| [☢️ Nuclear Deterrence](./systems/nuclear-deterrence.md) | ✅ | 5 nuclear states, MAD mechanics, bilateral tensions, escalation ladder |
| [📰 Information Warfare](./systems/information-warfare.md) | ✅ | Truth decay, deepfakes, epistemological crisis, coordination penalty |
| [👥 Population Dynamics](./systems/population-dynamics.md) | ✅ | 8B → concrete tracking, refugee crises, bottleneck events |
| [🔍 Sleeper Detection](./systems/sleeper-detection.md) | ✅ | Blown cover mechanics, 70% detection bonus, nuanced trust |
| [🌊 Planetary Boundaries](./systems/) | ✅ | Phosphorus, freshwater, ocean acidification, novel entities (TIER 1) |
| [📊 Policy Interventions](./systems/) | ⚠️ | UBI, retraining, teaching support, job guarantee (systemic inequality modeled) |
| [🎲 Lévy Flights](./systems/) | ✅ | Fat-tailed distributions (power-law events, 8,249 extreme events validated) |
| [🌩️ Exogenous Shocks](./systems/) | ✅ | Black/Gray Swans (8 types, 0.1% + 1% monthly rates) |
| [🦸 Critical Junctures](./systems/) | ✅ | 90/10 structure-agency split (4 escape types: prevent war, enable cooperation, recover crisis, unlock breakthrough) |
| [☢️ Nuclear Command Control](./systems/) | ✅ | Circuit breakers (human-in-loop, kill switches, time delays) |

### Game Mechanics

How the simulation operates and what determines outcomes:

| Mechanic | Status | Description |
|----------|--------|-------------|
| [💰 Economics](./mechanics/economics.md) | ✅ | Stages, revenue, expenses, UBI transitions |
| [📊 Quality of Life](./mechanics/quality-of-life.md) | ✅ | 17-dimensional welfare measurement |
| [🎯 Outcomes](./mechanics/outcomes.md) | ✅ | Utopia, Dystopia, Extinction attractors |
| [✨ Golden Age](./mechanics/golden-age.md) | ✅ | Prosperity state vs Utopia outcome |
| [⚡ Crisis Cascades](./mechanics/crisis-cascades.md) | ✅ | How multiple crises compound |
| [🎲 Scenario Parameters](./mechanics/scenario-parameters.md) | ✅ | Historical vs unprecedented parameter sets (P0.7) |
| [⚡ Actions](./mechanics/actions.md) | ✅ | What each agent type can do |
| [⚙️ Simulation Loop](./mechanics/simulation-loop.md) | ✅ | Phase-based execution (40+ phases in deterministic order) |

### Advanced Systems

Specialized mechanics and complex interactions:

| System | Status | Description |
|--------|--------|-------------|
| [🔬 Research & Technology](./advanced/research.md) | ✅ | Capability growth, breakthroughs, diffusion |
| [🛡️ Detection & Security](./advanced/detection.md) | ✅ | Benchmark evals, sleeper detection, sandbagging |
| [💀 Extinction Mechanisms](./advanced/extinctions.md) | ⚠️ | 17 ways humanity can end (needs tuning) |
| [🎲 Crisis Points](./advanced/crisis-points.md) | ✅ | Racing dynamics, alignment collapse, recursion |
| [🔄 Lifecycle](./advanced/lifecycle.md) | ✅ | AI birth, training, deployment, retirement |

### Technical Documentation

Implementation details and code references:

| Topic | Status | Description |
|-------|--------|-------------|
| [📁 Codebase Structure](./technical/codebase.md) | ✅ | File organization, module dependencies |
| [🧪 Testing & Monte Carlo](./technical/testing.md) | ✅ | Running simulations, analyzing results |
| [🎮 UI Components](./technical/ui.md) | ✅ | React components, state management |
| [⚙️ Engine Architecture](./technical/engine.md) | ✅ | Core simulation engine design |
| [🔄 Refactoring Status](./technical/refactoring-status.md) | ✅ | Phase 0-6 roadmap and current status |
| [🔧 Phase 2 Refactoring](./technical/phase2-refactoring.md) | ✅ | Architectural cleanup details (Oct 2025) |

## 🔧 System Status Overview

### ✅ TIER 0-2 + TIER 4.3 Complete! (Merged to Main Oct 12, 2025)

**🎯 Research-Backed Realism:** 90+ citations, 3,000+ lines of research documentation, all parameters justified

**TIER 0: Baseline Corrections (2025 Reality)**
- ✅ Biodiversity: 70% → **35%** (IPBES 2024: 50-70% loss since 1970)
- ✅ Resources: 85% → **65%** (Earth Overshoot Day, 1.7x overshoot)
- ✅ Pollution: 15% → **30%** (7/9 planetary boundaries breached)
- ✅ Climate Rate: 4.8%/yr → **0.96%/yr** (IPCC AR6, was 5x too fast)
- ✅ Meaning Crisis: 15% → **22%** (WHO 2025: 17-21% youth)

**TIER 1: Critical Extinction Risks (Research-Backed)**
- ✅ **Phosphorus Depletion**: Morocco 70% control, supply shocks, 24-month famine pathway
- ✅ **Freshwater Crisis**: Day Zero droughts, Peak Groundwater, 36-month collapse
- ✅ **Ocean Acidification**: 7th boundary breached (Sept 2025), 48-month marine collapse
- ✅ **Novel Entities**: PFAS in 99% of blood, 120-month slow poisoning
- ✅ **International Competition**: AI race dynamics, first-mover advantage, coordination failure

**Comprehensive Technology Tree (71 technologies)**
- ✅ **TIER 0 (11)**: Deployed 2025 at realistic levels
  - Alignment: Basic RLHF (95%), mechanistic interpretability (15%), adversarial eval (40%)
  - Climate: De-extinction (1%), direct air capture (2%), AI pollution remediation (10%)
  - Social: Collective purpose networks (15%)
  - Medical: AI diagnostics (25%), mRNA vaccines (40%)
  - Energy: 4th gen solar (8%), offshore wind (12%)
- ✅ **TIER 1 (18)**: Planetary boundary crisis tech (phosphorus recovery, desalination, ocean alkalinity, PFAS remediation, etc.)
- ✅ **TIER 2 (22)**: Major mitigations (enhanced UBI, AI mental health, scalable oversight, grid batteries, chemical recycling, etc.)
- ✅ **TIER 3 (15)**: Transformative tech (fusion power, disease elimination, regenerative medicine, vertical farming, AI rights, etc.)
- ✅ **TIER 4 (5)**: Clarketech (advanced longevity 150+, molecular nanotech, space industrialization, brain emulation)

**TIER 4.3: Information Warfare & Epistemology**
- ✅ **Truth Decay**: Deepfakes grow 0.5-4%/month with AI capability
- ✅ **Detection Arms Race**: Generation wins 1.5x (asymmetric warfare)
- ✅ **Narrative Control**: Govt (25%), Corps (40%), AI (5%), Grassroots (30%)
- ✅ **Coordination Penalty**: 0-50% based on information integrity
- ✅ **4 Crisis Events**: Saturation, epistemological, collapse, AI dominance

**Population Dynamics & Refugee Crises**
- ✅ **Concrete Population Tracking**: 8.0B → gradual decline, not abstract
- ✅ **Refugee Crisis System**: 5 trigger types (climate, war, nuclear, famine, ecosystem)
- ✅ **Generational Resettlement**: 25 years (300 months) to integrate
- ✅ **Population Thresholds**: Thriving (>7B) → Bottleneck (10K-100M) → Extinction (<10K)
- ✅ **Fortress World Dystopia**: Militarized borders, surveillance states from refugee crises

**Sleeper Detection & Blown Cover**
- ✅ **Catastrophic Actions Reveal Intent**: 30-80% base detection when AI acts
- ✅ **Information Warfare Integration**: Truth decay lowers detection effectiveness
- ✅ **Hyperintelligence Exception**: AGI >4.0 always escapes detection
- ✅ **Nuanced Trust Mechanics**: Defensive AI success BOOSTS trust (not just decay)
- ✅ **Periodic Hunting**: Old sleepers lose copies over time (40-60% loss)

**Foundation Systems (Complete)**
- **Organizations System**: $132B capital, data center construction, strategic AI development
- **Compute Infrastructure**: Moore's law growth, allocation, 100% survival rate
- **Economics**: 5 stages (0-4), UBI transitions, wealth distribution
- **AI Capabilities**: 17-dimensional profiles with true vs revealed
- **Quality of Life**: 17-dimensional measurement system
- **Golden Age Detection**: Prosperity state tracking, distinct from Utopia outcome
- **Accumulation Systems**: Environmental, social cohesion, technological risk (realistic 2025 baselines)
- **Crisis Cascades**: 10+ crisis types with compounding degradation (up to 3.0x)
- **Breakthrough Technologies**: **71 total** in comprehensive tech tree
  - TIER 0 (11): Deployed 2025 at realistic levels (RLHF 95%, DAC 2%, de-extinction 1%)
  - TIER 1 (18): Planetary boundary crisis tech (phosphorus, freshwater, ocean, pollution)
  - TIER 2 (22): Major mitigations (social, alignment, energy, recycling, ecosystem)
  - TIER 3 (15): Transformative (fusion, medical breakthroughs, climate engineering, agriculture)
  - TIER 4 (5): Clarketech (longevity 150+, nanotech, space, brain emulation)
- **Tech Tree System**: Prerequisites, research costs, deployment timelines, regional effects
- **Crisis Recovery**: Technologies can reverse active crises when sufficiently deployed
- **Governance Quality**: AI-augmented decision making, democratic resilience, authoritarian resistance
- **Upward Spirals**: 6 virtuous cascades (Abundance, Cognitive, Democratic, Scientific, Meaning, Ecological)
- **Meaning Renaissance**: 4 dimensions of cultural flourishing
- **Conflict Resolution**: Diplomatic AI, post-scarcity peace dividend, cyber defense
- **Nuclear Deterrence**: 5 nuclear states, MAD mechanics, treaty dynamics (reduced war 80% → 20%)
- **Phase 2 Architectural Refactoring**: Type safety, trust system consistency, clean APIs
- **Monte Carlo**: 1000+ runs in ~10 seconds

**P0.7: Scenario Parameter System (Oct 16, 2025)**
- ✅ **Two Parameter Sets**: Historical (defensible) vs Unprecedented (honest tail risk)
- ✅ **Historical Mode**: Black Death calibration (0.5% monthly mortality, 1.8x multiplier, 10% recovery)
- ✅ **Unprecedented Mode**: 3x mortality (1.5%), 3.5x multiplier, 1% recovery (climate hysteresis)
- ✅ **Monte Carlo Ready**: Run 50% historical, 50% unprecedented to show outcome range
- ✅ **Research Validated**: 25+ peer-reviewed sources, skeptical critique integrated
- See: [Scenario Parameters Documentation](./mechanics/scenario-parameters.md)

### 🌟 MILESTONE: First Utopia Outcomes Achieved! (Oct 17, 2025)

**Breakthrough:** Simulation successfully produced **20% utopia rate** (2/10 runs) for first time ever.

**Monte Carlo Results** (N=10, 120 months, seeds 42000-42009):
- 🌟 **Utopia: 20%** (2 runs) - First confirmed utopias in project history
- 💀 Extinction: 80% (8 runs)
- Status Quo: 0%
- Dystopia: 0%

**Key Enablers:**
1. **TIER 0D Bug Fixes**: Orphan AI bug eliminated, organizations stabilized
2. **Contingency & Agency Phase 1**: Lévy flights (fat-tailed distributions) - 8,249 extreme events detected
3. **Contingency & Agency Phase 2**: Exogenous shocks (Black/Gray Swans) - rare transformative events
4. **Contingency & Agency Phase 3**: Critical juncture agency - 90/10 structure-agency split enables rare hero moments
5. **Policy Calibration**: UBI floor bug fixed (now works at ALL economic stages)
6. **Nuclear Command Control**: Circuit breakers prevent 0% nuclear war rate bug

See: [MILESTONE_FIRST_UTOPIAS.md](/MILESTONE_FIRST_UTOPIAS.md) for full analysis.

---

### 📊 Contingency & Agency Modeling (Oct 16-17, 2025)

**Status**: ✅ **PHASES 1-3 COMPLETE** (Lévy Flights + Exogenous Shocks + Critical Junctures)

**Research Foundation**: Replace deterministic convergence with realistic outcome variance via fat-tailed distributions, rare unpredictable events, and structural conditions for individual/collective agency.

**Core Framework**:
- **Phase 1: Lévy Flights** - Fat-tailed distributions for endogenous processes (power-law extreme events)
- **Phase 2: Exogenous Shocks** - Black/Gray Swans from outside normal state space (8 shock types)
- **Phase 3: Critical Junctures** - 90/10 structure-agency split (rare hero/collective action moments)

#### Phase 1: Lévy Flights (Fat-Tailed Distributions)

**Implementation**: `src/simulation/utils/levyDistributions.ts` (182 lines)

Replaces Gaussian randomness with **power-law distributions** for systems where extreme events are more common than normal distributions predict.

**Research Foundation**:
- Clauset et al. (2009): Power laws in empirical data
- Bak et al. (1987): Self-organized criticality
- Mantegna & Stanley (1994): Lévy flights in finance
- Brockmann et al. (2006): Human mobility patterns

**Alpha Parameter Presets** (calibrated Oct 17):
- **Finance (α=2.5)**: Organizational bankruptcy, revenue volatility
- **Environment (α=2.0)**: Environmental cascades, tipping points
- **AI (α=2.5)**: AI capability breakthroughs, research jumps
- **Technology (α=3.0)**: Technology diffusion, viral adoption
- **Social (α=2.5)**: Social movement cascades, trust dynamics

**Asymmetric Distributions** (Taleb 2012 "Antifragile"):
- **Fragile systems**: Fat negative tails (α=1.5), moderate positive tails (α=2.8)
- **Example**: Financial crashes 2-3x larger than rallies (historical 22% loss vs 11% gain)
- **Complete Alpha Parameter Table**:
  - **Finance (negative)**: α=1.5 (fat negative tail - crashes)
  - **Finance (positive)**: α=2.8 (moderate positive tail - rallies)
  - **Environment (negative)**: α=1.8 (tipping points, cascades)
  - **Environment (positive)**: α=2.5 (recovery, regeneration)
  - **AI (negative)**: α=2.0 (capability drops, safety failures)
  - **AI (positive)**: α=2.5 (breakthroughs, capability jumps)
  - **Technology (adoption)**: α=3.0 (viral spread, network effects)
  - **Social (negative)**: α=2.0 (trust collapse, polarization)
  - **Social (positive)**: α=2.5 (social movements, trust recovery)

**Mechanism**: Asymmetric distributions model the empirical observation that:
- Fragile systems break faster than they heal (Taleb 2012)
- Downside risks have fatter tails than upside gains
- Example: It takes decades to build trust, moments to destroy it

**Research**: Mandelbrot & Taleb (2007) "Mild vs Wild Randomness" - financial markets exhibit asymmetry

**Applied in 7 Systems**:
1. **Organizations** (`organizationManagement.ts`): Bankruptcy risk, revenue shocks
2. **Environmental** (`environmental.ts`): Tipping point cascades
3. **Research** (`research.ts`): AI capability breakthroughs
4. **Social** (`socialCohesion.ts`): Social movement cascades, meaning crisis spikes
5. **Technology Diffusion** (`technologyDiffusion.ts`): Viral tech adoption

**Validation Results** (N=50 runs, 6000 simulation months):
- **8,249 extreme events** detected (1.37 per month)
- **Outcome variance increased**: Broke 80-90% seed convergence
- **Distribution match**: Power-law tail confirmed via log-log plots

**Impact**: Enables rare positive cascades (utopia pathways) while maintaining realistic crisis dynamics.

#### Phase 2: Exogenous Shock System (Black & Gray Swans)

**Implementation**: `src/simulation/engine/phases/ExogenousShockPhase.ts` (615 lines, order 27.5)

Models rare unpredictable events **outside normal state space evolution**.

**Research Foundation**:
- Taleb (2007): Black Swan theory - high impact, low predictability
- Sornette (2003): Critical phase transitions in social sciences
- IPCC AR6 (2021-2023): Volcanic eruption & shock event modeling methodology

**Historical Calibration**: 15 major black/gray swans in 80 years (1945-2025) = 0.19/year

**8 Shock Types**:

**Black Swans** (0.1%/month ~1%/year - civilization-altering):

1. **Nuclear War** (50-99% mortality, instant/rapid):
   - **Mortality**: Variable 50-99%, applied instantly to global and regional populations
   - **Effects**: Infrastructure destruction (90% data center capacity loss), nuclear winter (climate +50%, biodiversity +60%), social collapse (trust × 0.2)
   - **Extinction Trigger**: >87.5% mortality sets `extinctionState.active = true`
   - **Historical**: 0 occurrences, 6 near-misses (Cuban Missile Crisis 1962, 1983 false alarm)
   - **Mechanism**: Full-scale exchange, command & control failure

2. **AGI Breakthrough** (POSITIVE BLACK SWAN):
   - **Effect**: Unlock ALL breakthrough technologies instantly at 50% deployment
   - **Capability Boost**: All AI agents gain +5.0 self-improvement, +3.0 algorithms
   - **Research**: Recursive self-improvement achieved, fast takeoff initiated
   - **Historical**: 0 occurrences (no precedent for AGI)
   - **Impact**: Can enable utopia pathways if AI alignment holds

3. **Asteroid Impact** (10-90% mortality, nuclear winter):
   - **Mortality**: Variable 0-80%, based on impact size (rng)
   - **Effects**: Nuclear winter effects (dust, climate disruption +40%), infrastructure damage (30% capacity loss)
   - **Extinction Trigger**: >50% mortality sets `extinctionState.active = true`
   - **Historical**: 0 major impacts since 1908 Tunguska (sparse data)
   - **Mechanism**: Impact size determines severity

4. **Mega-Pandemic** (20-40% mortality over 24 months):
   - **Mortality**: Gradual 20-40% total over 24 months (0.83-1.67%/month)
   - **Effects**: Economic contraction (stage -1), social disruption (coordination × 0.7)
   - **State**: Creates `state.crises.megaPandemic` with duration tracking
   - **Historical**: 0 occurrences (COVID-19 was ~0.1% mortality, not 20-40%)
   - **Mechanism**: Novel pathogen, high transmissibility + lethality

**Gray Swans** (1.0%/month ~10%/year - major but recoverable):

5. **Financial Crash** (10-20% GDP loss):
   - **GDP Loss**: Variable 10-20%, economic stage -1
   - **Unemployment**: Okun's law (1% GDP loss ≈ 1.5% unemployment increase)
   - **QoL**: Declines by 50% of GDP loss (10% crash → -5% QoL)
   - **AI Funding**: VC dries up, org capital × (1 - gdpLoss × 2)
   - **Historical**: 3 occurrences (1987 crash, 2008 financial crisis, 2020 COVID crash)

6. **Regional War** (1-5% mortality, refugee crisis):
   - **Mortality**: Variable 1-5% globally, 5x in affected countries (1-3 randomly selected)
   - **Refugees**: 2x mortality in displacement (creates refugee crisis)
   - **Nuclear Risk**: MAD tension +0.2 (regional conflicts escalate)
   - **Historical**: Multiple (Iraq War 2003, Syrian Civil War 2011, Ukraine War 2022)
   - **Mechanism**: Conventional warfare, limited scope

7. **Tech Breakthrough** (POSITIVE GRAY SWAN):
   - **Effect**: Unlock 1 random TIER 2-3 technology at 10% deployment
   - **Selection**: Random from locked TIER 2-3 techs
   - **Historical**: 4 transformative breakthroughs (transistor 1947, IC 1958, internet 1969, transformers 2017)
   - **Impact**: Can accelerate recovery pathways or enable new capabilities

8. **Political Upheaval** (regime change, institutional collapse):
   - **Legitimacy**: Government legitimacy × 0.5 (institutional collapse)
   - **Outcome**: Democratization OR authoritarian takeover (based on social capacity × information integrity)
   - **Effects**: Economic stage -1, coordination × 0.7
   - **Historical**: Multiple (Soviet collapse 1991, Arab Spring 2011, color revolutions)
   - **Mechanism**: Revolution, coup, mass protests

**Validation Results** (N=100 runs, 12,000 months):
- **Total shocks**: 111 (0.925%/month, within 15% of expected 1.1%)
- **Black swans**: 12 (0.1%/month) ✅ Perfect match
- **Gray swans**: 99 (0.825%/month, 82.5% of expected)
- **Runs affected**: 8% (within 5-10% target range)

**State Tracking**: `state.history.exogenousShocks[]` records all shocks with month, type, severity.

**Bug Fixes Applied**:
- Record<> iteration errors fixed (3 locations)
- Refugee crisis array initialization
- Country population system defensive checks

**Impact**: Creates branching paths and outcome divergence. Enables both catastrophic events (nuclear war, asteroid) and positive Black Swans (AGI breakthrough, tech leaps).

---

#### Phase 3: Critical Juncture Agency (Oct 17, 2025)

**Implementation**: `src/simulation/engine/phases/CriticalJuncturePhase.ts` (419 lines, order 29)

Models the 10% of history where **individual/collective agency can alter structural trajectories**.

**Research Foundation**:
- Acemoglu & Robinson (2001): Critical junctures as moments of institutional fluidity
- Svolik (2012): Democratic breakdowns require both elite defection AND mass mobilization
- Kuran (1991): Preference falsification - hidden opposition can suddenly cascade
- Sen (1999): Agency as capability to shape outcomes (democracy enables agency)

**Historical Case Studies**:
1. **Vasili Arkhipov (1962)**: Single vote prevented nuclear war during Cuban Missile Crisis
2. **Leipzig Protests (1989)**: One defection revealed hidden preferences → cascade → Berlin Wall fell
3. **Montreal Protocol (1987)**: International cooperation despite economic incentives

**Core Insight**: 90% of history is structurally determined, but at critical junctures (institutional flux + information ambiguity + balanced forces), individuals can tip outcomes.

**Detection Logic - `isAtCriticalJuncture()`**:

Critical junctures require **ALL THREE conditions**:
1. **Institutional Flux**: `institutionStrength < 0.4` (institutions weakened but not destroyed)
2. **Information Ambiguity**: `informationIntegrity < 0.5` (coordination problems)
3. **Balanced Forces**: `1-2 active crises && QoL 0.3-0.7` (crisis exists but recoverable)

**Agency Potential Calculation - `calculateAgencyPotential()`**:

```typescript
baseAgency = democracyIndex × 0.4 + infoIntegrity × 0.3 + institutionStrength × 0.3
latentOpposition = max(0, 0.6 - QoL)  // Kuran 1991: hidden grievances
coordinationCascade = (latentOpposition > 0.3 && infoIntegrity < 0.4) ? 0.2 : 0  // Leipzig 1989
personalAuthority = (5% probability) ? 0.3 : 0  // Arkhipov case: respected authority
movementStrength = society.socialMovements.strength × 0.2

agencyPotential = min(1.0, sum of all factors)
```

**Escape Attempt Mechanics**:

Four escape types based on current conditions:

1. **Prevent War** (if nuclear tensions > 0.7):
   - Reduce `madDeterrence.globalTensionLevel` by 40%
   - Reduce bilateral tensions by 40%
   - Example: Vasili Arkhipov preventing nuclear launch

2. **Enable Cooperation** (if 2+ crises active, QoL > 0.4):
   - Boost alignment research investment (+2)
   - Improve institutional capacity (+0.2)
   - Improve information integrity (+0.15)
   - Example: Montreal Protocol achievement

3. **Recover from Crisis** (if QoL < 0.5, population > 70% of initial):
   - Increase social cohesion (+0.2)
   - Reduce meaning crisis (-0.15)
   - Improve QoL (+0.3)
   - Example: Leipzig 1989 cascade revealing hidden opposition

4. **Unlock Breakthrough** (default fallback):
   - Boost breakthrough multiplier (+0.3, max 2.0)
   - Increase technological breakthrough rate (+1.5)
   - Example: Manhattan Project mobilization

**Success Probability**: `roll < agencyPotential` → escape succeeds

**State Tracking**:

```typescript
state.history.criticalJunctureEscapes?: Array<{
  month: number;
  type: 'prevent_war' | 'enable_cooperation' | 'recover_from_crisis' | 'unlock_breakthrough';
  agencyPotential: number;  // [0,1] Probability of success
  crisisSeverity: number;   // [0,1] Normalized crisis level
}>;

state.society.socialMovements?: {
  strength: number;    // [0,1] Organized opposition capacity
  grievances: number;  // [0,1] Latent opposition (hidden preferences)
};
```

**Validation Results** (N=100, October 17, 2025):

- **Status**: ✅ All phases executed without errors
- **Critical Juncture Frequency**: 0-2 per run (validates 90/10 structure-agency split)
- **Expected frequency**: ~5-10% of months (rare conditions by design)
- **Mechanism Fidelity**: Kuran cascade, Sen agency, Svolik flux, Arkhipov authority all implemented
- **Falsifiability Tests**: 4 explicit tests designed (democracy vs autocracy, institutional stability, crisis severity, Kuran cascade)

**90/10 Structure-Agency Split**:
- Target: 90% structural forces, 10% agency moments
- Implementation: Triple-condition AND logic ensures rarity
- Validation: <5% of months trigger critical juncture detection (correct)

**Why Low Frequency is Correct**:
According to research (Acemoglu & Robinson 2001, Svolik 2012):
- Critical junctures are RARE historical moments
- Require simultaneous: weak institutions + ambiguous info + balanced crisis
- Most history is structurally determined (90%)
- Only ~10% allows genuine agency

**Phase Order**: 29 (after ExogenousShockPhase, before ExtinctionTriggersPhase)

**Performance Impact**: Negligible (<1ms per month, <0.1% of total simulation time)

**Impact**: Final piece of Contingency & Agency framework. Captures structure-agency split from research - enables rare hero/collective action moments without making outcomes random.

**Completion Documentation**: See `logs/phase3_critical_juncture_agency_implementation_summary.md` for full implementation details, `plans/phase3-critical-juncture-agency.md` for design spec.

---

### Phase 1B Hybrid Refinement: Stratified Outcomes & Trauma Modeling (Oct 17, 2025)

**Implementation Time**: ~5 hours total (stratified outcomes + 2 new phases + famine fixes)
**Status**: ✅ Complete and Validated (N=10 Monte Carlo runs)

Addresses critical gap identified by research-skeptic: The simulation was classifying runs with 84% mortality (6.7B deaths) as "utopia", conflating humane prosperity with pyrrhic recovery after catastrophe.

---

#### Stratified Outcome Classification System

**Implementation**: `src/simulation/engine.ts` lines 208-278 (classifyStratifiedOutcome function)

Distinguishes **humane** (prosperity without mass death) vs **pyrrhic** (recovery after catastrophe) outcomes.

**Research Foundation**:
- Wilkinson & Pickett (2009): Extreme disruption (>20% mortality) causes decades of trauma - inequality matters as much as outcome type
- Rawls (1971): Distributive justice requires examining worst-off groups
- Historical precedents: Black Death (30-60% mortality, recovered), Spanish Flu (3-5%), WWII (3%)

**Core Concept**: A "utopia" outcome where 2 billion people died (25% mortality) is fundamentally different from one where everyone survived. The stratified system makes this distinction explicit.

**7 Outcome Types**:

1. **Humane Utopia**: Prosperity achieved WITHOUT mass death (<20% mortality)
   - Best-case scenario: flourishing with minimal casualties
   - Example: Gradual AI transition, no major crises

2. **Pyrrhic Utopia**: Recovery AFTER catastrophe (≥20% mortality, eventual prosperity)
   - Material recovery but lasting psychological trauma
   - Example: Nuclear war survivors rebuild to prosperity after decades
   - Caveat: Decades of trauma (Wilkinson & Pickett 2009)

3. **Humane Dystopia**: Oppression WITHOUT mass death (<20% mortality)
   - Authoritarian control, surveillance state, no flourishing
   - Example: AI-enabled totalitarianism, fortress world

4. **Pyrrhic Dystopia**: Oppression AFTER catastrophe (≥20% mortality, continued oppression)
   - Worst-case: mass death AND no recovery to prosperity
   - Example: Climate collapse → authoritarian resource rationing

5. **Bottleneck**: Near-extinction recovery (<500M population)
   - Genetic diversity compromised, civilization reset
   - Severe trauma, institutional collapse

6. **Extinction**: True extinction (<10K people)
   - Terminal collapse, humanity extinct or near-extinct

7. **Inconclusive**: Mixed signals, indeterminate state

**5 Mortality Bands**:
- **Low** (<20%): Humane outcomes possible
- **Moderate** (20-50%): Significant crisis, difficult recovery
- **High** (50-75%): Collapse, civilization reset
- **Extreme** (75-90%): Dark age, institutional breakdown
- **Bottleneck** (>90%): Genetic bottleneck, near-extinction

**State Types** (`game.ts` lines 1132-1151):
```typescript
export type StratifiedOutcomeType =
  | 'humane-utopia'      // Prosperity without mass death (<20% mortality)
  | 'pyrrhic-utopia'     // Recovery after catastrophe (≥20% mortality)
  | 'humane-dystopia'    // Oppression without mass death (<20% mortality)
  | 'pyrrhic-dystopia'   // Oppression after catastrophe (≥20% mortality)
  | 'bottleneck'         // Near-extinction recovery (<500M population)
  | 'extinction'         // Terminal collapse (<10K people)
  | 'inconclusive';      // Indeterminate state

export type MortalityBand =
  | 'low'       // <20% mortality (humane)
  | 'moderate'  // 20-50% mortality (significant crisis)
  | 'high'      // 50-75% mortality (collapse)
  | 'extreme'   // 75-90% mortality (dark age)
  | 'bottleneck'; // >90% mortality (genetic bottleneck)
```

**State Tracking**:
- `state.stratifiedOutcome`: StratifiedOutcomeType
- `state.mortalityBand`: MortalityBand
- `state.initialPopulation`: number (captured at simulation start)

**Validation Results** (N=10, 120 months, seeds 42000-42009):
- **Pyrrhic Dystopia**: 70% (7/10 runs) - Average 64.5% mortality
- **Extinction**: 30% (3/10 runs)
- **Finding**: ALL dystopia outcomes were pyrrhic (100% had ≥20% mortality)
- **Interpretation**: Current parameters produce very harsh outcomes - even "successful" runs involve massive population collapse

**Key Insight**: This system enables nuanced analysis of outcomes. A simulation ending with 6B survivors (25% mortality) and high QoL is classified as "pyrrhic-utopia" - material recovery but with lasting trauma. This matters for policy analysis and scenario planning.

---

#### PsychologicalTraumaPhase (Order 23.5)

**Implementation**: `src/simulation/engine/phases/PsychologicalTraumaPhase.ts` (107 lines, order 23.5)

Models long-term psychological impact of mass death events on survivors.

**Research Foundation**:
- Wilkinson & Pickett (2009): Extreme disruption (>20% mortality) causes decades of trauma
- PTSD literature: 40-60% PTSD rates in survivors of mass casualty events
- Diamond (2005): >50% mortality leads to institutional breakdown lasting generations

**Mechanics**:
- **Trauma Accumulation**: Triggered when monthly mortality exceeds 10%
  - Catastrophic (>50% mortality): +60% trauma level
  - Severe (30-50% mortality): +35% trauma level
  - Major (10-30% mortality): +15% trauma level
- **Diminishing Returns**: Trauma accumulation has diminishing returns (can't exceed 95%)
- **Recovery**: Base rate -0.02/month (50 months to halve trauma)
  - Faster with mental health tech (TIER 3 psychological wellbeing: 1.5x)
  - Faster with high social cohesion (>0.6): 1.25x multiplier
- **Effects**: Reduces QoL (psychological and social dimensions), erodes institutional trust

**State Tracking**: `state.psychologicalTrauma` with 6 properties:
- `traumaLevel`: [0,1] Cumulative psychological burden
- `monthsSinceLastMassEvent`: Recovery time counter
- `generationalTrauma`: [0,1] Affects children (future feature)
- `mentalHealthInfrastructure`: [0,1] Treatment capacity (starts 0.5)
- `massDeathEvents`: Count of >10% mortality events
- `lastEventSeverity`: [0,1] Most recent event severity

**QoL Penalties** (`src/simulation/qualityOfLife.ts`):
- **Psychological Wellbeing**: Non-linear penalty `traumaPenalty = traumaLevel^1.5`
- **Social Connections**: Reduced by `traumaPenalty × 0.5`
- **Community Strength**: Reduced by `traumaPenalty × 0.4`
- **Institutional Trust**: Eroded when trauma >30% (legitimacy × 0.7, cohesion × 0.85)

**Phase Order**: Runs after population dynamics (23.0), before QoL calculations (34.0)

**Expected Impact**:
- **Humane utopia**: 2-5% avg trauma (minimal)
- **Pyrrhic utopia**: 25-40% avg trauma → 15-25% QoL reduction vs humane
- **Pyrrhic dystopia**: 35-50% avg trauma (severe)

**Key Insight**: A "utopia" where 2 billion people died is psychologically different from one where everyone survived. Trauma persists for decades even after material recovery. This explains why pyrrhic outcomes feel less positive despite high base QoL.

---

#### FoodSecurityDegradationPhase (Order 34.5)

**Implementation**: `src/simulation/engine/phases/FoodSecurityDegradationPhase.ts` (74 lines, order 34.5)

Applies monthly food security degradation during active crises.

**Research Foundation**:
- Historical food crises show 5-15% monthly decline in food availability
- Multiple simultaneous crises have compounding effects
- Infrastructure breakdown accelerates food system collapse

**Mechanics**:
- **Baseline Degradation**: 1% per month in normal conditions
- **Crisis Compounding**: Each active crisis multiplies degradation by 1.5x
  - 2 crises: 1% × 1.5² = 2.25%/month
  - 3 crises: 1% × 1.5³= 3.375%/month
- **Crisis Detection**: Phosphorus, freshwater, biodiversity, environmental tipping, planetary cascades
- **Cap**: 15% per month maximum (prevents unrealistic spikes)

**Phase Order**: CRITICAL - Runs AFTER QualityOfLifePhase (34.0) to avoid overwriting degradation

**Integration**: Works with `FamineSystemPhase` (29.5) and planetary boundaries to model realistic food security collapse timelines

**Bug Fix**: Previously, famines couldn't trigger because food security was reset by QoL calculations each month. Now degradation applies AFTER QoL phase.

**Historical Validation**:
- Ukraine Holodomor (1932-1933): Food security 0.5-0.6 → 20% mortality
- Bengal Famine (1943): Food security ~0.6 → 5% mortality
- Somalia Famine (2011): Food security 0.5-0.6
- **Pattern**: Famines trigger at food security 0.5-0.7, NOT 0.4

**Famine System Recalibration**: Threshold lowered from 0.4 → 0.6 to match historical precedents

---

#### Files Modified

**Phase 1B Implementation** (Oct 17, 2025):

1. **src/types/game.ts**
   - Lines 1125-1145: StratifiedOutcomeType and MortalityBand type definitions
   - Lines 1055-1060: GameState interface extensions (stratifiedOutcome, mortalityBand, initialPopulation)
   - Lines 830-850: PsychologicalTraumaState interface

2. **src/simulation/engine.ts**
   - Lines 208-278: `classifyStratifiedOutcome()` function
   - Line 586: Capture initial population before mutations
   - Lines 839-865: Stratification integration and logging

3. **src/simulation/engine/phases/PsychologicalTraumaPhase.ts** (NEW)
   - 107 lines: Full trauma accumulation and recovery logic

4. **src/simulation/engine/phases/FoodSecurityDegradationPhase.ts** (NEW)
   - 74 lines: Crisis-accelerated food degradation

5. **src/simulation/initialization.ts**
   - Initialize `psychologicalTrauma` state with baseline values

6. **src/simulation/qualityOfLife.ts**
   - Trauma penalties on psychological wellbeing, social connections, institutional trust

7. **src/simulation/planetaryBoundaries.ts**
   - Famine threshold recalibration (0.4 → 0.6)

8. **scripts/monteCarloSimulation.ts**
   - Lines 309-312: RunResult interface extension
   - Lines 1111-1116: Capture stratified data from finalState
   - Lines 1163-1268: Stratified outcome reporting section
   - Lines 1297-1326: Enhanced individual run display

---

#### Documentation Files

- `devlogs/phase1b-stratified-outcomes-2025-10-17.md` - Comprehensive implementation log
- `plans/psychological-trauma-implementation-summary.md` - Trauma mechanics detailed spec
- `logs/famine-bug-investigation_oct17_2025.md` - Root cause analysis of famine system
- `reviews/phase1b_levy_recalibration_critical_review_20251017.md` - Critical review that motivated this work

---


### Phase 1B: Nuclear Command & Control Circuit Breakers (Oct 16, 2025)

**Critical Bug Fix**: Prevents 0% nuclear war rate bug (nuclear deterrence was TOO effective).

**Implementation**: `src/simulation/engine/phases/NuclearCommandControlPhase.ts` (80 lines, order 20)

**Research Foundation**:
- Schelling (1960): Nuclear strategy and circuit breakers
- Blair (1993): Logic of Accidental Nuclear War
- Sagan (1993): Limits of Safety in complex systems

**3 Circuit Breaker Types**:

1. **Human-in-the-Loop**:
   - Veto points enforced (1-4 decision makers)
   - Bypass detection and blocking
   - Effectiveness: 60-90% depending on veto points

2. **AI Kill Switches**:
   - Coverage: 70-95% of AI systems
   - Activation tracking
   - Degradation over time (AI learns to evade)

3. **Time Delays**:
   - Mandatory cooling-off periods (12-72 hours)
   - Escalation prevention
   - Effectiveness decays with high AI capability

**Phase Order**: Runs at order 20 (after AI actions at 2-8, before crisis detection at 26-30) to update circuit breaker effectiveness before checking nuclear escalation.

**Integration**: Works with `BayesianNuclearRisk` system and `MADDeterrencePhase` to provide realistic nuclear war probability (neither 0% nor 100%).

---

### P2.4: Economic Stage Recovery Tracking (Oct 16, 2025)

**Implementation**: `src/simulation/engine/phases/UpdateEconomicStagePhase.ts` (order 34)

Tracks recovery from economic crises and transitions between 5 economic stages.

**5 Economic Stages**:
- **Stage 0**: Subsistence (pre-industrial)
- **Stage 1**: Industrial (basic automation)
- **Stage 2**: Post-industrial (advanced automation)
- **Stage 3**: Post-scarcity emerging (AI-driven abundance)
- **Stage 4**: Full post-scarcity (utopia economics)

**Recovery Mechanics**:
- Tracks months in each stage
- Downgrade triggers: Financial crashes, crises, unemployment spikes
- Upgrade triggers: Sustained QoL, technology deployment, spiral activation

**Country Expansion**: Added 3 new countries to population system:
- Ireland
- Singapore
- Australia

**Integration**: Works with `EconomicTransitionPhase` (order 31) to model realistic economic volatility and recovery timelines.

---

### P2.6: Policy Interventions & Systemic Inequality (Oct 16-17, 2025)

**Comprehensive Monte Carlo Validation: N=120 runs (6 scenarios × 10 seeds × 2 seed ranges), 120 months (10 years)**

#### Implementation Overview

All government-funded programs exhibit **systemic inequality** where effectiveness varies by socioeconomic class:

**Retraining Programs** (`src/simulation/bionicSkills.ts`):
- Elite (100% effectiveness): Corporate retraining, personalized coaching → 50% displacement reduction
- Middle (70% effectiveness): Community college programs → 35% displacement reduction
- Working (40% effectiveness): Underfunded public programs → 20% displacement reduction
- Precariat (20% effectiveness): Severely underfunded → 10% displacement reduction

**Teaching Support / AI-Human Education**:
- Elite (100% access): Private tutors, 1-on-1 attention → 40% scaffolding boost
- Middle (65% access): Decent public schools → 26% scaffolding boost
- Working (35% access): Underfunded schools → 14% scaffolding boost
- Precariat (15% access): Severely underfunded → 6% scaffolding boost

**Job Guarantee Programs**:
- Elite (5% unemployment floor): Professional admin roles, can be selective
- Middle (8% floor): Skilled trades positions
- Working (12% floor): Low-skill labor positions
- Precariat (15% floor): Exploitative workfare, forced to take anything

**Research Citations**: Katz & Krueger (2019), Harvey (2005), Chetty et al. (2014), MGNREGA India (2020)

#### Policy Synergy: Teaching-Meaning Spiral

**AI Windfall → Education Investment → Meaningful Work** (`src/simulation/upwardSpirals.ts`):

When AI productivity creates economic surplus (productivity growth > 30%) AND society invests in education (teaching support > 50%), a virtuous cycle emerges:

1. AI automation generates productivity surplus
2. Government invests surplus in education programs
3. Creates demand for **meaningful teaching jobs** (humans want to teach when conditions are good)
4. Teaching jobs provide purpose fulfillment
5. **Reduces meaning crisis by up to 25%**
6. Higher meaning → social cohesion → enables more investment

**Synergy Mechanics**:
- Synergy strength = min(0.5, teachingInvestment × productivitySurplus)
- Meaning reduction = synergyStrength × 0.5 (max 25%)
- Adds bonus to Meaning Spiral strength (up to +30%)

#### Monte Carlo Validation Results

**1. Systemic Inequality Effects Working as Designed** ✅
- **UBI most effective**: -81.5% to -87.9% wage gap reduction (no quality stratification)
- **Retraining weakest**: -9.4% to -13.6% wage gap reduction (quality stratification dominant)
- **Combined interventions best**: 87.9% reduction → 0.8% final wage gap
- **Teaching support**: Modest reduction due to access inequality

**Economic Theory Validation**:
- Alaska PFD model confirms UBI effectiveness (no stratification → direct benefit)
- Acemoglu's displacement framework explains differential effectiveness
- Sen's capabilities approach: Programs that expand freedoms work better

**2. Competence Gap Reduction** ✅
- **Combined interventions**: 2.8% competence gap (vs 4.7% baseline = 39.3% reduction)
- Teaching support crucial for maintaining human skills alongside AI
- Retraining alone insufficient (only 5.5% reduction)

**3. Teaching-Meaning Synergy Working** ✅
- Meaning Spiral activates when teaching investment + productivity surplus high
- Up to 25% meaning crisis reduction observed
- Suggests "purpose economy" viable if AI productivity funds human-centered work

#### Critical Issues Discovered

**1. Job Guarantee Paradox - CRITICAL BUG** ❌

Job Guarantee policy produces **HIGHEST unemployment** (58.9% ± 40.3%) when it should produce **LOWEST** (<15%):
- Expected: 5-15% unemployment floor depending on segment
- Actual: 58.9% unemployment (worse than baseline 30.8%)
- Suggests `calculateUnemploymentFloor()` logic may be inverted
- **All Job Guarantee findings INVALID until bug fixed**

**2. Extreme Variance - Unpredictable Outcomes** ⚠️

Unemployment has **±40% standard deviation** (coefficient of variation 96-124%):
- Same policy with different seeds: 0% to 100% unemployment range
- Suggests outcomes are **chaotic** or **bimodal** (cascades vs survival)

**Possible causes**:
- Crisis cascades dominating (environmental/social tipping points → mass unemployment)
- Chaotic dynamics (butterfly effects from RNG sensitivity)
- Missing stabilization mechanisms (no negative feedback loops, automatic stabilizers)
- Missing reinstatement effect (Acemoglu: AI creates new tasks, not just displacement)

**3. Seed Hypersensitivity** ⚠️

Results completely different across seed ranges:
- Seeds 42000-42059: 54% unemployment convergence across ALL scenarios
- Seeds 80000-80059: 30-59% unemployment differentiation
- Violates research validation principle: results should be robust to seed choice

**Fix Applied**: Changed seed selection from sequential to random sampling

**4. AI Lab Financial Model Broken** ⚠️

All major AI labs (OpenAI, Anthropic, Meta, DeepMind) go bankrupt months 70-120 across ALL scenarios:
- Labs hit negative capital but simulation continues
- Bankruptcy doesn't trigger proper effects (should cause mass unemployment, capability freeze)
- Unrealistic: labs should have VC funding runway or be profitable

#### Policy Recommendations (Validated)

**1. For Wage Inequality**: UBI or Combined Interventions
- UBI eliminates quality stratification (everyone gets same benefit)
- Combined approach (30% UBI + 70% other programs) → 87.9% wage gap reduction
- Avoid relying solely on retraining (systemic inequality makes it weak)

**2. For Competence Gaps**: Teaching Support + Retraining
- Combined interventions reduce competence gap by 39.3%
- Teaching support crucial for long-term human skill retention
- AI-human collaboration > AI replacement

**3. For Meaning Crisis**: Teaching-Meaning Synergy
- Invest AI productivity surplus in education (>50% teaching support)
- Creates meaningful work opportunities (teaching, care work, arts)
- Up to 25% meaning crisis reduction validated

**4. For Overall Welfare**: Balanced Multi-Policy Approach
- No single policy solves all problems
- Combined: 30-40% UBI + 70% retraining + 70% teaching support + 70% job guarantee
- Creates synergies and resilience (don't put all eggs in one basket)

**5. Alternative Policies to Explore** (Research-Backed):
- **Cooperative AI Ownership**: Mondragon model (4% bankruptcy vs 10% capitalist)
- **Reduced Work Hours + UBI**: 4-day week insufficient alone, needs comprehensive safety net
- **Universal Basic Services (UBS)**: Guaranteed housing, healthcare, education, transport
- **Meaning Economy Expansion**: Fund care work, arts, community building with AI surplus

#### Known Limitations & Next Steps

**Active Bugs**:
- ❌ Job Guarantee logic inverted (TIER 0D priority)
- ⚠️ Extreme variance needs investigation (histogram analysis)
- ⚠️ AI lab bankruptcy model unrealistic

**Research Gaps**:
- Need longer timeframe validation (20-40 years for generational effects)
- QoL decomposition by socioeconomic class (detect "Elysium" scenarios)
- Histogram analysis to determine chaos vs cascades
- Labor market stabilization mechanisms audit

**Economic Theory Discussion**: See `/.claude/chatroom/channels/policy-economics-discussion.md` for detailed multi-agent analysis grounding these findings in Acemoglu, Sen, Alaska PFD, MGNREGA, and Frase's Four Futures framework.

---

### P2.6: Memetic Evolution & Polarization Dynamics (Oct 16, 2025)

**Implementation**: `src/simulation/engine/phases/MemeticEvolutionPhase.ts` (order 22.0)

Models how beliefs, narratives, and ideologies spread through society in response to AI development.

**Research Foundation** (TRL 6-7 - HIGHLY MATURE):
- Expert Systems with Applications (2024): Multi-agent opinion dynamics
- npj Complexity (2024): Affective polarization and information spread
- Physical Review Research (2025): Social network depolarization mechanisms
- Scientific Reports (2021): Entropy and meme evolution
- Duncan Watts (UPenn), Cristian Candia (Northwestern), Marten Scheffer (Wageningen)

**Core Insight**: This is the MOST MATURE technology from contingency/agency research, with TRL 6-7 validation against empirical data.

#### 1. Meme Creation

**Triggers**:
- **Crisis Pressure**: Environmental, economic, or social crises generate memes
- **AI Activity**: AI capabilities and actions spawn narratives
- **Social Movements**: Grassroots organizing creates memes

**Meme Properties**:
- `emotionalValence`: [-1, 1] Emotional charge (fear, anger, hope)
- `novelty`: [0, 1] How new/surprising (decays 10%/month)
- `sourceCredibility`: [0, 1] Trust in source
- `fitness`: Emotional valence × novelty × credibility

#### 2. Meme Transmission

**Bounded Confidence Model** (Expert Systems w/ Applications 2024):
- Agents only interact with opinions within 0.3 distance
- Creates stable belief clusters (echo chambers)
- Resists convergence across groups

**Transmission Probability**: Base 30%, modified by:
- Network structure (scale-free, power-law degree distribution)
- Echo chamber strength (internal/external connection ratio)
- Confirmation bias: 70% (agents prefer confirming info)

**Mutation Rate**: 5% per transmission (from Scientific Reports 2021)
- Reinterpretation during spread
- Content drift over time
- Creates meme variants

#### 3. Meme Selection

**Fitness Function**: `emotional_valence × novelty × source_credibility`

**Key Finding**: Negative emotions (fear, anger) spread faster than positive emotions
- Outrage spreads 2-5x faster (npj Complexity 2024)
- Biases information ecosystem toward negativity

**Lifespan**: Default 12 months, but can persist longer if repeatedly reinforced

#### 4. AI Amplification

**Deepfakes** (AI social capability 1.5 → 5.0):
- **Exposure**: 0-80% of population exposed
- **Fooling Rate**: 40% (from research)
- **Impact**: Erodes trust in visual media, enables false narratives

**Bot Networks** (AI capability > 2.5 Turing threshold):
- **Bot Influence**: 0-30% of content once threshold reached
- **Effect**: Automated meme spreading at scale
- **Detection**: Difficult without sophisticated counter-measures

**Algorithmic Amplification**:
- **Baseline Boost**: 1.5x (2024 social media algorithms)
- **Advanced AI Boost**: Up to 5x with high AI capability
- **Mechanism**: Algorithms preferentially boost high-engagement (often polarizing) content

#### 5. Polarization Metrics

**Opinion Variance**:
- Moderate: 0.3-0.5
- High: 0.5-0.7
- Critical Fragmentation: >0.7

**Echo Chamber Strength**: Internal/external connection ratio
- Threshold: >2.0 (2x more internal connections)

**Affective Polarization**: Emotional dislike of out-groups
- Measured separately from belief distance
- Amplified by algorithmic filtering

#### State Structure

**5 Belief Segments** (2025 baseline calibration):
- **AI Optimists**: Trust AI (0.7), early adopters
- **AI Skeptics**: Cautious (0.3), wait-and-see
- **Luddites**: Reject AI (-0.5), resistant
- **Techno-Utopians**: Extreme trust (0.9), accelerationists
- **Doomers**: Extreme fear (-0.7), existential risk focused

**Belief Dimensions** (8 total):
- AI trust, climate urgency, tech adoption, government trust
- Economic views, social values, environmental priority, AI safety concern

**Meme Tracking**:
- Active memes with prevalence by segment
- Mutation history (tracking evolution)
- Source attribution (organic, AI-generated, propaganda)

#### Integration Points

**Information Warfare System** (TIER 4.3):
- Truth decay from deepfakes reduces meme credibility
- Epistemological crisis (<20% integrity) → democracy cannot function
- Coordination penalty (0-50%) based on polarization

**Social Cohesion System**:
- High polarization (>0.7) → social cohesion decline
- Echo chambers reduce cross-group cooperation
- Meaning crisis compounds when narratives fragment

**Technology Adoption**:
- AI resistance slows deployment in skeptical segments
- Tech backlash when adoption outpaces trust
- Heterogeneous adoption rates by belief cluster

**Policy Effectiveness**:
- Polarized societies resist coordinated action
- Policy success depends on social cohesion
- Democratic governments struggle with fragmented populations

#### Validation

**Empirical Calibration**: 2016 US election polarization patterns
**Validation Against**: 2020 US election, Brexit, COVID-19 polarization
**Data Sources**: Twitter/X, Facebook/Meta aggregated social graph data

**Parameters** (research-backed):
- Bounded confidence: 0.3 (Expert Systems 2024)
- Confirmation bias: 0.7
- Mutation rate: 5% (Scientific Reports 2021)
- Algorithmic boost: 1.5-5x baseline

#### Key Research Citations

- Expert Systems with Applications (2024): "The evolution dynamics of collective and individual opinions in social networks"
- npj Complexity (2024): "Affective polarization and dynamics of information spread in online networks"
- Physical Review Research (2025): "Social network heterogeneity promotes depolarization"
- Scientific Reports (2021): "Entropy and complexity unveil the landscape of memes evolution"

**Completion Documentation**: See `plans/completed/p2-6-memetic-polarization-dynamics-COMPLETE.md` for full implementation details

---

### Multi-Dimensional Death Tracking (October 18, 2025)

**Status**: ✅ Complete and Validated (N=100 Monte Carlo, 335.7s runtime)

Implemented **two-dimensional death attribution** separating proximate causes (what killed them) from root causes (why it happened).

**Key Insight**: "It was humans the whole time" - Climate change creates disasters (0.3% direct deaths) BUT governance failures (97%) amplify them into mass death.

**Proximate Causes** (What killed them - medical/physical):
- War, Famine, **Disasters** (renamed from "climate"), Disease, Ecosystem, Pollution, AI, Cascade, Other

**Root Causes** (Why it happened - systemic drivers):
- **Climate Change**, Conflict, **Governance**, Alignment, Natural, Poverty, Other

**Research Foundation**:
- Sen's entitlement theory: Famines are distribution failures, not production failures
- WHO social determinants framework: Root causes vs immediate causes
- ICD-10 classification: Medical cause of death (proximate)

**Validation Results (N=100, 120 months)**:
- **Proximate**: Famine 97.3%, Disease 1.4%, Ecosystem 0.5%, Disasters 0.3%
- **Root**: Governance 97.0%, Climate Change 0.3%

**Files Modified**: 9 locations (population types, environmental deaths, heat waves, radiation, famines, overshoot, regional populations, reporting, Monte Carlo)

**Impact**: Makes diagnosis "infinity easier" - instantly see whether deaths are climate, governance, conflict, or alignment-driven.

See: `devlogs/multidimensional-death-tracking_20251018.md` for complete implementation details.

---

### What's Next 🚀

**✅ TIER 0-2 Complete!** All baseline corrections, critical risks, and major mitigations merged to main.

**Current Status (October 17, 2025):**
- **All systems implemented**: TIER 0-2 (baseline + critical risks + mitigations), TIER 4.3 (info warfare), TIER 4.6 (human enhancement)
- **Contingency & Agency**: Phases 1-3 COMPLETE (Lévy flights + exogenous shocks + critical junctures)
- **Nuclear Command Control**: Circuit breakers prevent 0% war rate bug
- **First Utopias**: 20% rate achieved (N=10 validation)
- **75+ commits, ~5,000 lines of code**, fully tested and documented
- **Research-backed**: 120+ citations, every parameter justified
- **Philosophy validated**: "Let the model show what it shows" - realism over balance

**Testing & Validation Needed:**
1. **Monte Carlo Analysis (N=50-100)**: Measure TIER 2 impact on outcomes
   - Expected: Reduced extinction rate, possible Utopia pathways opening
   - Baseline corrections make crises harder (35% biodiversity vs 70%)
   - TIER 2 mitigations should enable recovery pathways
2. **Spiral Activation Rates**: Do pre-unlocked technologies enable spirals?
   - Technologies now start at 2-15% deployment (immediately scalable)
   - Government action frequency boosted 6x (0.08 → 0.5)
   - Test if faster government action + pre-unlocked tech = spiral activation
3. **Extinction Pathway Analysis**: Which TIER 1 risks dominate?
   - Phosphorus supply shocks vs freshwater depletion vs ocean acidification
   - Information warfare coordination penalty impact
   - Population dynamics refugee crisis frequency

**Potential Future Work (TIER 3-5):**
- **TIER 3: Planetary Boundaries Framework** (Kate Raworth's full 9 boundaries)
- **TIER 4.4-4.9**: Energy constraints, human enhancement, consciousness evolution
- **TIER 5**: Advanced features (financial systems, religious movements, temporal dynamics)

See **[`plans/MASTER_IMPLEMENTATION_ROADMAP.md`](../../plans/MASTER_IMPLEMENTATION_ROADMAP.md)** for detailed roadmap.

## 🔄 Phase Execution Order (Updated Oct 17, 2025)

The simulation runs via a **phase-based architecture** with 40+ phases executing in deterministic order each month.

**Phase Categories:**

**1.0-10.0: Agent & Infrastructure**
- ComputeGrowthPhase (1.0): Moore's law, data center construction
- OrganizationTurnsPhase (2.0): Revenue, expenses, bankruptcy
- ComputeAllocationPhase (3.0): Distribute compute to AIs
- AILifecyclePhase (4.0): Birth, training, deployment, retirement
- CyberSecurityPhase (5.0): Defensive AI, cyber attacks
- SleeperWakePhase (6.0): Sleeper agent activation
- AIAgentActionsPhase (7.0): AI strategic decisions
- TechnologyBreakthroughsPhase (8.0): Research progress
- StochasticInnovationPhase (8.5): Lévy-flight driven breakthroughs (**NEW Oct 17**)
- GovernmentActionsPhase (9.0): Policy implementation
- SocietyActionsPhase (10.0): Adapt to AI, trust dynamics

**11.0-25.0: System Updates**
- GovernanceQualityPhase (11.0): Democratic resilience, AI augmentation
- UpwardSpiralsPhase (12.0): 6 virtuous cascades
- TechTreePhase (12.5): Technology deployment, effects
- MeaningRenaissancePhase (13.0): Cultural flourishing
- ConflictResolutionPhase (14.0): Diplomatic AI, peace dividend
- DiplomaticAIPhase (15.0): Hegemonic AI alignment
- NationalAIPhase (16.0): Country-level AI capabilities
- UBIPhase (17.0): Universal basic income
- SocialSafetyNetsPhase (18.0): Community programs
- InformationWarfarePhase (19.0): Truth decay, deepfakes
- **NuclearCommandControlPhase (20.0)**: Circuit breakers (**NEW Oct 16**)
- PowerGenerationPhase (21.0): Energy systems
- HumanEnhancementPhase (21.5): Neural interfaces, longevity (**Oct 16**)
- MemeticEvolutionPhase (22.0): Meme transmission, polarization (**Oct 16**)
- MADDeterrencePhase (23.0): Nuclear deterrence, escalation
- ResourceEconomyPhase (24.0): Resource extraction, depletion
- ResourceTechnologyPhase (24.5): Tech effects on resources
- GeoengineringPhase (25.0): Climate intervention

**26.0-29.5: Crisis & Planetary Systems**
- DefensiveAIPhase (26.0): Sleeper detection, defensive actions
- PhosphorusPhase (26.5): Phosphorus depletion crisis
- FreshwaterPhase (26.7): Freshwater crisis, Day Zero
- OceanAcidificationPhase (26.8): Marine ecosystem collapse
- NovelEntitiesPhase (26.9): PFAS, persistent pollutants
- HumanPopulationPhase (27.0): Population dynamics, mortality
- RefugeeCrisisPhase (27.2): Refugee flows, resettlement
- CountryPopulationPhase (27.3): Regional population tracking
- **ExogenousShockPhase (27.5)**: Black/Gray Swan events (**NEW Oct 17**)
- WarMeaningFeedbackPhase (28.0): War-meaning crisis loop
- ClimateJusticePhase (28.5): Environmental debt, justice
- **CriticalJuncturePhase (29.0)**: Critical juncture agency - individual/collective escape attempts (**NEW Oct 17**)
- OrganizationViabilityPhase (29.0): Org bankruptcy vs country health
- NuclearWinterPhase (29.2): Long-term nuclear effects
- RadiationSystemPhase (29.3): Cancer, birth defects, contamination
- PlanetaryBoundariesPhase (29.4): 9 boundaries tracking
- FamineSystemPhase (29.5): Famine progression, mortality

**30.0-36.0: Metrics & Outcome Calculation**
- UnemploymentPhase (30.0): Calculate unemployment, displacement
- EconomicTransitionPhase (31.0): Progress toward post-scarcity
- ParanoiaPhase (32.0): Government paranoia dynamics
- SocialStabilityPhase (33.0): Social cohesion, coordination
- **UpdateEconomicStagePhase (34.0)**: Recovery tracking (**NEW Oct 16**)
- QualityOfLifePhase (34.0): 17-dimensional QoL calculation
- **FoodSecurityDegradationPhase (34.5)**: Crisis-accelerated food degradation (**NEW Oct 17**)
- OutcomeProbabilitiesPhase (36.0): Utopia/dystopia/extinction probabilities
- CrisisDetectionPhase (36.5): Detect active crises

**37.0-40.0: Endgame & Catastrophes**
- ExtinctionTriggersPhase (37.0): Check extinction conditions
- ExtinctionProgressPhase (38.0): Progress extinction events
- TechnologyDiffusionPhase (39.0): Tech spread across regions
- DystopiaProgressionPhase (40.0): Dystopia variant tracking
- CatastrophicScenariosPhase (40.5): Catastrophic event handling

**22.0-24.0: Special Phases & Modeling**
- BenchmarkEvaluationsPhase (22.5): AI evaluations, sandbagging detection
- **PsychologicalTraumaPhase (23.5)**: Trauma accumulation & recovery from mass death events (**NEW Oct 17**)
- CrisisPointsPhase (23.0): Racing dynamics, alignment collapse
- **TriggeredEventsPhase (24.7)**: External event injection (**NEW Oct 16**)

**98.0-99.0: Finalization**
- EventCollectionPhase (98.0): Aggregate events for logging
- TimeAdvancementPhase (99.0): Increment month counter

**Key Changes (Oct 16-17):**
- Added **NuclearCommandControlPhase** (20.0): Circuit breakers to prevent 0% war rate bug
- Added **ExogenousShockPhase** (27.5): Black/Gray Swan events (8 types)
- Added **CriticalJuncturePhase** (29.0): Critical juncture agency - 90/10 structure-agency split (**NEW Oct 17**)
- Added **PsychologicalTraumaPhase** (23.5): Trauma accumulation from mass death events (**NEW Oct 17**)
- Added **UpdateEconomicStagePhase** (34.0): Track recovery from crises
- Added **FoodSecurityDegradationPhase** (34.5): Crisis-accelerated food degradation (**NEW Oct 17**)
- Added **TriggeredEventsPhase** (24.7): External validation events
- Modified **StochasticInnovationPhase** (8.5): Now uses Lévy flights for breakthroughs
- Modified **HumanEnhancementPhase** (21.5): Neural interfaces, longevity, consciousness merger
- Modified **MemeticEvolutionPhase** (22.0): Meme transmission, AI amplification

**Total Phases**: 67 registered phases (up from 64 in previous documentation)

---

## 🏗️ Architecture Refactoring (October 17, 2025)

**Status**: ✅ COMPLETE - Major modularization of 4 monolithic files

### Motivation

The simulation codebase suffered from technical debt concentrated in several large files (1,200-2,800 lines). This created:
- Merge conflicts on every feature
- O(n) and O(n²) performance bottlenecks
- Impossible-to-test monolithic functions
- Mixed responsibilities and concerns
- High cognitive load for developers

### Refactorings Completed

**Total Impact**: 7,537 lines across 4 files → 28 focused modules (average 216 lines/module)

#### 1. qualityOfLife.ts (1,646 → 7 modules, 85% reduction)

**Problem**: Single 1,646-line file mixing QoL calculations, mortality, regional distribution, and crisis penalties.

**Solution**: Created `/src/simulation/qualityOfLife/` directory:
- **core.ts** (250 lines) - Main calculation engine, orchestration
- **dimensions.ts** (488 lines) - 17 QoL dimension calculations (survival fundamentals, material, psychological, social, health)
- **penalties.ts** (260 lines) - Crisis, trauma, unemployment penalties
- **regional.ts** (484 lines) - Regional distribution with Gini coefficient, Elysium detection
- **aggregation.ts** (202 lines) - Tier aggregation with pre-computed weights
- **mortality.ts** (441 lines) - Environmental mortality, famine risk
- **cache/regionalCache.ts** (138 lines) - Map-based caching for O(1) regional lookups

**Performance**: 20-30% faster through Map-based caching (O(n) → O(1) regional lookups)

**Validation**: Monte Carlo N=10 at 120 months - PASS ✅

#### 2. nationalAI.ts (1,188 → 7 modules)

**Problem**: Single 1,188-line file with O(n²) nested country loops for AI competition, cooperation, espionage.

**Solution**: Created `/src/simulation/nationalAI/` directory:
- **deployment.ts** (493 lines) - Domestic AI presence, espionage mechanics
- **cooperation.ts** (418 lines) - International agreements, trust dynamics
- **competition.ts** (290 lines) - AI race dynamics, first-mover advantages
- **regulation.ts** (165 lines) - Regulatory arbitrage
- **interactionCache.ts** (138 lines) - Cached country-country interactions (O(n²) → O(n))
- **initialization.ts** (152 lines) - System initialization
- **index.ts** (108 lines) - Public API

**Performance**: Eliminated nested country loops with pre-computed cooperation potentials

**Validation**: TypeScript compilation PASS, backward compatible ✅

#### 3. bionicSkills.ts (1,883 → 7 modules)

**Problem**: Single 1,883-line file mixing 6+ concerns (AI skills, labor market, policy, inequality, education, economy).

**Solution**: Created `/src/simulation/aiAssistedSkills/` directory:
- **skillAmplification.ts** (974 lines) - AI learning rates, phase transitions
- **laborDistribution.ts** (204 lines) - Job matching, labor-capital distribution
- **policyEffects.ts** (454 lines) - Government policy impact (retraining, education)
- **inequalityTracking.ts** (134 lines) - Access inequality metrics
- **aggregateMetrics.ts** (383 lines) - Population-level calculations
- **types.ts** (278 lines) - Interface definitions
- **index.ts** (67 lines) - Public API

**Concerns separated**: AI skills, labor market, policy effects, inequality tracking, aggregate metrics

**Validation**: Monte Carlo N=10 at 120 months - PASS ✅

#### 4. governmentAgent.ts (2,820 → modular action system)

**Problem**: Monolithic 2,820-line file with 80+ government actions in single massive array, impossible to test individually.

**Solution**: Created `/src/simulation/government/` directory:

**actions/** (11 category files, 96,578 total lines):
- **economicActions.ts** (403 lines) - UBI, redistribution, wealth taxes
- **regulationActions.ts** (351 lines) - AI regulation, safety standards
- **safetyActions.ts** (387 lines) - Safety research, alignment funding
- **securityActions.ts** (399 lines) - Surveillance, control measures
- **rightsActions.ts** (434 lines) - AI rights, labor protections
- **researchActions.ts** (147 lines) - Technology investments
- **crisisActions.ts** (189 lines) - Emergency responses
- **detectionActions.ts** (202 lines) - Sleeper detection, monitoring
- **environmentalActions.ts** (311 lines) - Climate action, conservation
- **internationalActions.ts** (189 lines) - Treaties, cooperation
- **index.ts** (78 lines) - Action registry

**core/** (orchestration):
- **actionRegistry.ts** - Registry pattern for 80+ actions
- **governmentLogic.ts** - Selection and execution logic
- **types.ts** - Interface definitions

**Testability**: Each of 80+ actions now individually testable

**Validation**: TypeScript compilation PASS ✅

### Overall Impact

**Before:**
- 4 monolithic files (7,537 total lines)
- Mixed responsibilities, hard to maintain
- O(n²) and O(n) performance issues
- Impossible to test individual components
- Average file size: 1,884 lines

**After:**
- 28 focused modules across 4 directories
- Average file size: 216 lines (down from 1,884)
- Clear separation of concerns
- O(1) Map-based caching throughout
- Fully testable, maintainable, extensible

**Performance Improvements:**
- qualityOfLife: 20-30% faster (O(n) → O(1) regional lookups)
- nationalAI: Eliminated O(n²) nested country loops
- Government actions: Registry pattern enables lazy loading

**Validation Results:**
- Monte Carlo N=10 at 120 months: PASS ✅
- All outputs identical to monolithic versions
- TypeScript compilation: PASS (no errors)
- Backward compatible: All existing imports work

**Documentation:**
- `/devlogs/qualityOfLife-refactor_20251017.md` - QoL refactoring details
- `/devlogs/bionicSkills-refactor_20251017.md` - Bionic skills refactoring (if exists)
- `/devlogs/governmentAgent-refactor_20251017.md` - Government agent refactoring (if exists)
- `/reviews/architecture-refactoring-plan_20251017.md` - Architecture analysis and plan

### Files Modified

**Refactored (original files deleted):**
- `/src/simulation/qualityOfLife.ts` (1,646 lines) → `/src/simulation/qualityOfLife/` (7 modules)
- `/src/simulation/nationalAI.ts` (1,188 lines) → `/src/simulation/nationalAI/` (7 modules)
- `/src/simulation/bionicSkills.ts` (1,883 lines) → `/src/simulation/aiAssistedSkills/` (7 modules)
- `/src/simulation/agents/governmentAgent.ts` (2,820 lines) → `/src/simulation/government/` (modular structure)

**Commit**: `2ffbd91` - "refactor: Major architecture improvements - 3 giant files modularized"

### Next Refactoring Candidates

**Tier 2 Priorities (1,000-1,500 lines):**
1. **extinctions.ts** (1,211 lines) - Extinction triggers, progression, prevention
2. **techTree/effectsEngine.ts** (1,120 lines) - Technology effects by category
3. **defensiveAI.ts** (1,028 lines) - Detection vs response logic

See `/reviews/architecture-refactoring-plan_20251017.md` for complete analysis.

---

## 📊 Current Simulation Characteristics (Post-TIER 2)

**Status**: TIER 0-2 + TIER 4.3 + Contingency & Agency Phases 1-2 complete, **First Utopias Achieved**

**Expected Changes from TIER 2 Implementation:**

**Baseline Reality (TIER 0):**
- Starting biodiversity: 70% → **35%** (more realistic, harder to recover)
- Starting resources: 85% → **65%** (already in overshoot)
- Starting pollution: 15% → **30%** (7/9 boundaries breached)
- Starting meaning crisis: 15% → **22%** (WHO 2025 data)
- **Impact**: Crises start closer to trigger thresholds, less margin for error

**Extinction Risk Diversification (TIER 1):**
- Added phosphorus depletion (24-month famine), freshwater crisis (36-month collapse)
- Ocean acidification (48-month marine collapse), novel entities (120-month poisoning)
- International AI race competition (coordination failure pathway)
- **Impact**: More realistic extinction pathways beyond just climate/nuclear

**Mitigation Pathways (TIER 2):**
- 6 new technologies **pre-unlocked** at 2-15% deployment (immediately scalable)
- Government action frequency boosted 6x (0.08 → 0.5 = monthly actions)
- Constitutional AI 100% deployed (surface alignment solved)
- Mechanistic interpretability: 70% sleeper detection (up from ~5%)
- **Impact**: Should enable recovery pathways, possible Utopia outcomes

**Information Warfare (TIER 4.3):**
- Truth decay: Deepfakes grow 0.5-4%/month
- Coordination penalty: 0-50% based on information integrity
- Epistemological crisis when integrity <20% (democracy cannot function)
- **Impact**: Makes coordination harder, enables dystopia pathways

**Population Dynamics:**
- Concrete 8B → gradual decline tracking (not abstract severity)
- Refugee crises create social tension, fortress world dystopia risk
- Population bottleneck <100M = genetic diversity loss
- **Impact**: Extinction becomes granular, new dystopia pathway

**Actual Outcome Distribution (Oct 17, 2025):**
- **Pre-Contingency & Agency**: 100% extinction (deterministic collapse, no variance)
- **Post-Contingency & Agency (N=10, seeds 42000-42009)**:
  - 🌟 **Utopia: 20%** (2 runs) - First confirmed utopias ever
  - 💀 **Extinction: 80%** (8 runs)
  - Status Quo: 0%
  - Dystopia: 0%
- **Key Finding**: Lévy flights + exogenous shocks enabled branching paths and rare positive cascades
- **Validation**: Fat-tailed distributions break deterministic convergence (8,249 extreme events in N=50)

## 🎮 Using This Wiki

### For Players

If you want to understand how to play the simulation effectively:
1. Read [Game Overview](./overview.md)
2. Study [Win Conditions](./outcomes.md)
3. Learn about [Government Actions](./systems/government.md)
4. Understand [Quality of Life](./mechanics/quality-of-life.md)

### For Researchers

If you're analyzing the simulation model:
1. Check [Economic Model](./mechanics/economics.md)
2. Review [Extinction Mechanisms](./advanced/extinctions.md)
3. Study [Monte Carlo Results](./technical/testing.md)
4. See [Parameter Sensitivity](./technical/parameters.md)

### For Developers

If you're working on the codebase:
1. Start with [Codebase Structure](./technical/codebase.md)
2. Review [Engine Architecture](./technical/engine.md)
3. Check [System Interactions](./technical/interactions.md)
4. See [Testing Guide](./technical/testing.md)

## 📊 State Types Reference (Phase 1B, Oct 17 2025)

Complete reference for new state types introduced in Phase 1B refinement.

### Stratified Outcome Types

**Location**: `src/types/game.ts` lines 1132-1151

```typescript
export type StratifiedOutcomeType =
  | 'humane-utopia'      // Prosperity without mass death (<20% mortality)
  | 'pyrrhic-utopia'     // Recovery after catastrophe (≥20% mortality)
  | 'humane-dystopia'    // Oppression without mass death (<20% mortality)
  | 'pyrrhic-dystopia'   // Oppression after catastrophe (≥20% mortality)
  | 'bottleneck'         // Near-extinction recovery (<500M population)
  | 'extinction'         // Terminal collapse (<10K people)
  | 'inconclusive';      // Indeterminate state

export type MortalityBand =
  | 'low'       // <20% mortality (humane)
  | 'moderate'  // 20-50% mortality (significant crisis)
  | 'high'      // 50-75% mortality (collapse)
  | 'extreme'   // 75-90% mortality (dark age)
  | 'bottleneck'; // >90% mortality (genetic bottleneck)
```

**State Properties**:
- `state.stratifiedOutcome`: StratifiedOutcomeType
- `state.mortalityBand`: MortalityBand
- `state.initialPopulation`: number (8.0B baseline)

### Psychological Trauma State

**Location**: `src/types/game.ts` lines 830-850

```typescript
export interface PsychologicalTraumaState {
  traumaLevel: number;                  // [0,1] Cumulative psychological burden
  monthsSinceLastMassEvent: number;     // Recovery time counter
  generationalTrauma: number;           // [0,1] Affects children (future feature)
  mentalHealthInfrastructure: number;   // [0,1] Capacity to treat (starts at 0.5)
  massDeathEvents: number;              // Count of >10% mortality events
  lastEventSeverity: number;            // [0,1] Severity of most recent event
}
```

**State Property**: `state.psychologicalTrauma?: PsychologicalTraumaState`

**Triggers**: Monthly mortality >10% accumulates trauma
**Recovery**: -0.02/month base rate (50 months to halve)
**Effects**: Reduces QoL psychological/social dimensions

### Exogenous Shock History

**Location**: `src/types/game.ts` lines 265-269

```typescript
state.history.exogenousShocks?: Array<{
  month: number;
  type: string;  // ShockType enum
  severity: 'civilization-altering' | 'major-recoverable';
}>
```

**Shock Types** (8 total):
- **Black Swans** (0.1%/month): Nuclear War, AGI Breakthrough, Asteroid Impact, Mega-Pandemic
- **Gray Swans** (1.0%/month): Financial Crash, Regional War, Tech Breakthrough, Political Upheaval

### Mega-Pandemic Crisis State

**Location**: `src/types/game.ts` lines 234-242

```typescript
state.crises?: {
  megaPandemic?: {
    active: boolean;
    startMonth: number;
    totalMortality: number;      // 20-40% total
    monthlyMortality: number;    // Distributed over 24 months
    socialDisruption: number;    // 0.6 (60% disruption)
  };
}
```

**Trigger**: Mega-Pandemic exogenous shock (0.1%/month probability)
**Duration**: 24 months gradual mortality
**Effects**: Economic contraction, social disruption

---

## 📚 Recent Research & Plans Reference (Oct 16-17, 2025)

### Completed Implementation Plans

**Phase 1B Hybrid Refinement (Oct 17, 2025)**: ✅ DOCUMENTED
- Stratified outcome classification (humane vs pyrrhic)
- Psychological trauma modeling (PsychologicalTraumaPhase)
- Food security degradation (FoodSecurityDegradationPhase)
- Famine system fixes (threshold recalibration 0.4 → 0.6)
- Documents: `devlogs/phase1b-stratified-outcomes-2025-10-17.md`, `plans/psychological-trauma-implementation-summary.md`, `logs/famine-bug-investigation_oct17_2025.md`

**P2.6: Memetic Evolution (Oct 16, 2025)**:
- Document: `plans/completed/p2-6-memetic-polarization-dynamics-COMPLETE.md`
- Research validation: TRL 6-7 (highly mature)
- 10.5 hours implementation
- Full meme transmission, AI amplification, polarization metrics

**Contingency & Agency Phase 2 (Oct 17, 2025)**:
- Document: `plans/completed/phase2-exogenous-shock-system-COMPLETE.md`
- 8 shock types validated
- N=100 Monte Carlo validation

**Contingency & Agency Phase 3 (Oct 17, 2025)**:
- Document: `logs/phase3_critical_juncture_agency_implementation_summary.md`
- Plan: `plans/phase3-critical-juncture-agency.md`
- 90/10 structure-agency split implemented
- 4 escape types (prevent war, enable cooperation, recover from crisis, unlock breakthrough)
- N=100 Monte Carlo validation
- Falsifiability tests designed (democracy vs autocracy, institutional stability, crisis severity, Kuran cascade)

**Nuclear Command Control (Oct 16, 2025)**:
- Document: `plans/completed/phase1b-nuclear-command-control-COMPLETE.md`
- 3 circuit breaker types
- Prevents 0% war rate bug

**Lévy Flights (Oct 17, 2025)**:
- Document: `plans/completed/phase1-levy-flights-COMPLETE.md`
- Fat-tailed distributions
- 8,249 extreme events validated

### Recent Research Documents

**Contingency & Agency Debate (Oct 17, 2025)**:
- Location: `research/modeling-contingency-and-agency-debate_20251017.md` (50KB)
- Topic: Stochasticity vs determinism in complex systems
- Application: Lévy flights and exogenous shocks justify outcome variance

**QoL Class Decomposition (Oct 17, 2025)**:
- Location: `research/qol-class-decomposition_20251017.md` (16KB)
- Topic: Quality of life stratification by socioeconomic class
- Application: Detect "Elysium" scenarios (elite utopia, mass suffering)

**Black Mirror Phase 3 Research (Oct 16, 2025)**:
- Locations:
  - `research/black-mirror-phase3-research_20251016.md`
  - `research/black-mirror-phase3-research-AMENDED_20251016.md`
- Topic: Dystopia pathways and control mechanisms
- Review: `reviews/black-mirror-phase3-research-critique_20251016.md`

### Research Review Documents

**Location**: `reviews/` directory

Recent critical evaluations:
- `reviews/black-mirror-phase3-research-critique_20251016.md` (skeptical review)
- Additional reviews in `research/` alongside research docs

### Key Research Statistics

- **120+ peer-reviewed citations** (up from 90+)
- **2024-2025 sources prioritized** (cutting-edge research)
- **25+ sources for P0.7** (scenario parameters)
- **4+ sources for each major feature** (minimum standard)
- **TRL 6-7 for memetic evolution** (empirically validated)
- **10+ sources for Phase 3 critical junctures** (Acemoglu, Svolik, Kuran, Sen, Ostrom, etc.)

---

## 🔗 External References

### Planning & Specification
- **Original Spec**: `/plans/ai_alignment_game_spec.md`
- **Agent Spec**: `/plans/agent_types_specification.md`
- **Compute Plan**: `/docs/compute-resource-system.md`
- **Organization Plan**: `/docs/organization-agents-system.md`

### Testing & Analysis
- **Monte Carlo Results**: `/docs/MONTE_CARLO_RESULTS.md`
- **[Diagnostic Findings](./DIAGNOSTIC_FINDINGS.md)**: October 2025 deep dive into 0% Utopia blockers

### Devlogs (Recent Key Findings)
- `devlogs/monte-carlo-analysis-oct-9-action-fix.md` - Comprehensive blocker analysis
- `devlogs/spiral-diagnostic-findings-oct-9-2025.md` - Spiral activation rates
- `devlogs/session-oct-9-blockers-fixed.md` - Phase 2F+ implementation
- `devlogs/ai-accelerated-deployment-enhancement.md` - Distribution insight

## 📖 Legend

See [Emoji Legend](./_EMOJI_LEGEND.md) for consistent status indicators and terminology.

---

**Last Updated**: October 17, 2025 (Architecture Refactoring + Contingency & Agency Phase 3)
**Version**: 3.7 (Architecture Refactoring + Phase 3 Complete)
**Status**: 🏗️ **MAJOR ARCHITECTURE REFACTORING COMPLETE** + 🌟 **Contingency & Agency Framework COMPLETE**
**Latest**:
- **Architecture**: 4 monolithic files (7,537 lines) → 28 focused modules (avg 216 lines). Performance: 20-30% faster QoL, eliminated O(n²) country loops.
- **Phase 3**: Critical Juncture Agency implemented - 90/10 structure-agency split enables rare individual/collective escapes at critical junctures.

**Simulation Statistics (Oct 17, 2025)**:
- **67 registered phases** executing in deterministic order
- **120+ research citations** from peer-reviewed sources (2024-2025)
- **5,400+ lines of simulation code** (src/simulation/)
- **931 lines** in core engine.ts (phase orchestration)
- **419 lines** in CriticalJuncturePhase.ts (Phase 3 implementation)
- **75+ Git commits** since Oct 16, 2025
- **20% utopia rate** achieved (N=10 validation)

**Major Implementation (Oct 16-17, 2025):**

**Phase 1B Hybrid Refinement: Stratified Outcomes & Trauma Modeling**
- 📊 Stratified outcomes: Humane (<20% mortality) vs Pyrrhic (≥20% mortality) classification
- 💔 Psychological trauma: PsychologicalTraumaPhase (order 23.5) - long-term PTSD effects
- 🌾 Food security degradation: FoodSecurityDegradationPhase (order 34.5) - crisis-accelerated collapse
- 🍞 Famine fixes: Threshold 0.4 → 0.6 (matches historical famines: Holodomor, Bengal, Somalia)
- ✅ Validation: N=10 runs show 70% pyrrhic dystopia, 30% extinction (all "success" involves mass death)

**Contingency & Agency Phases 1-3: Fat-Tailed Distributions + Black/Gray Swans + Critical Junctures**
- 🎲 **Phase 1 - Lévy flights**: Power-law distributions replace Gaussian (8,249 extreme events validated)
- 🌩️ **Phase 2 - Exogenous shocks**: 8 shock types (Black Swans 0.1%/month, Gray Swans 1%/month)
- 🦸 **Phase 3 - Critical junctures**: 90/10 structure-agency split (4 escape types, rare hero moments)
- 📊 Outcome variance: Broke 80-90% seed convergence, enabled branching paths
- ✅ Validation: N=100 runs for Phases 2-3, N=50 runs for Phase 1

**Nuclear Command & Control Phase 1B: Circuit Breakers**
- ☢️ Human-in-the-loop: 1-4 veto points, bypass detection
- 🔴 AI kill switches: 70-95% coverage, degradation over time
- ⏳ Time delays: 12-72 hour cooling-off periods
- 🎯 Bug fix: Prevents 0% nuclear war rate (deterrence was TOO effective)

**TIER 0D Critical Bug Fixes (4 bugs eliminated)**
- 🐛 Bug #1: Job Guarantee paradox (unemployment floor logic)
- 🐛 Bug #2: Reinstatement effect missing (AI creates new tasks)
- 🐛 Bug #3: UBI floor broken (only worked at economicStage >= 3)
- 🐛 Bug #4: Orphan AI bug (0 orphan AIs validated) ✅

**P2.4-P2.6: Policy Interventions + Economic Recovery**
- 📊 Systemic inequality: 4 socioeconomic classes (Elite, Middle, Working, Precariat)
- 💼 Teaching-Meaning synergy: Up to 25% meaning crisis reduction
- 🏛️ Economic stage tracking: Recovery from crises, 5 stages modeled
- 🌍 Country expansion: Ireland, Singapore, Australia added

**P2.5: Triggered Events System (Empirical Validation)**
- 🎯 External event injection for testing
- 📝 State tracking: `state.history.exogenousShocks[]`
- ✅ Integration with Monte Carlo validation framework

**Implementation Stats:**
- 75+ commits since Oct 16, ~5,000 lines of production code
- 110+ research citations, 4,500+ lines of documentation
- **First utopias achieved**: 20% rate (2/10 runs) 🌟
- **Philosophy**: "Let the model show what it shows" - realism over balance

**Validation Results:**
- Monte Carlo N=100: Exogenous shocks validated
- Monte Carlo N=50: Lévy flights validated (8,249 events)
- Monte Carlo N=10: **First utopia outcomes** (20% rate)
- Monte Carlo N=120: Policy interventions validated (systemic inequality confirmed)
